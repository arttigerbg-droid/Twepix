<!doctype html>
<html>
<body>
  <h2>AI Chat + Image</h2>

  <h3>Chat</h3>
  <textarea id="chatMsg" rows="3" cols="40"></textarea><br>
  <button id="sendChat">Send</button>
  <div id="chatReply"></div>

  <h3>Image</h3>
  <input id="imgPrompt" placeholder="Describe an image" size="40">
  <button id="genImage">Generate</button>
  <div id="imgResult"></div>

  <script>
  async function post(path, data) {
    const res = await fetch(path, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });
    return res.json();
  }

  document.getElementById("sendChat").onclick = async () => {
    const msg = document.getElementById("chatMsg").value;
    const r = await post("/chat", { message: msg });
    document.getElementById("chatReply").innerText = r.reply || r.error;
  };

  document.getElementById("genImage").onclick = async () => {
    const prompt = document.getElementById("imgPrompt").value;
    const r = await post("/image", { prompt });
    if (r.image) {
      const img = new Image();
      img.src = r.image;
      document.getElementById("imgResult").innerHTML = "";
      document.getElementById("imgResult").appendChild(img);
    } else {
      document.getElementById("imgResult").innerText = r.error;
    }
  };
  </script>
</body>
</html>
